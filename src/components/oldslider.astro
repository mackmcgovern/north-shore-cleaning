---
import { Image } from 'astro:assets'
import HomeBath from '../assets/home-bath.jpg'
import HomeKitchen from '../assets/home-kitchen.jpg'
import ClinicImg from '../assets/clinic.jpg'
import CommercialImg from '../assets/commercial-space.jpg'
import HotelRoom from '../assets/hotel.jpg'
import HotelLobby from '../assets/hotel-lobby.jpg'
import SlideDouble from './SlideDouble.astro'

// const imageSlides = [
//   { title: 'Hospitality Cleaning', image1: HomeBath, image2: HomeKitchen },
//   { title: 'Commercial Cleaning', image1: ClinicImg, image2: CommercialImg },
// ]
---

<div class='slider-container'>
  <div class='slider'>
    <div class='slide'>
      <SlideDouble
        title='Hospitality Cleaning'
        image1={HomeBath}
        image2={HomeKitchen}
      />
    </div>
    <div class='slide'>
      <SlideDouble
        title='Commercial Cleaning'
        image1={ClinicImg}
        image2={CommercialImg}
      />
    </div>
    <div class='slide'>
      <SlideDouble
        title='Hotel Cleaning'
        image1={HotelRoom}
        image2={HotelLobby}
      />
    </div>
  </div>
  <button class='slider-button prev-button'>&#8249;</button>
  <button class='slider-button next-button'>&#8250;</button>
</div>

<!-- <div class='slider-container'>
  <div class='slider'>
    <div class='slide'>
      <p
        class='bg-teal-md py-4 text-white text-center tracking-widest text-lg service-title'>
        Hospitality Cleaning
      </p>
      <div class='relative'>
        <div
          class='absolute top-0 left-0 w-full h-full bg-teal-md bg-opacity-20'>
        </div>
        <div class='slider-images relative'>
          <div class='group'>
            <div class='flex'>
              <Image src={HomeBath} alt='' class='image-1' />
              <Image src={HomeKitchen} alt='' class='image-2' />
            </div>
          </div>
        </div>
      </div>
    </div>
    <button class='slider-button prev-button'>&#8249;</button>
    <button class='slider-button next-button'>&#8250;</button>
  </div>
</div> -->

<style>
  .slider-container {
    position: relative;
    overflow: hidden;
  }

  .slider {
    display: flex;
    transition: transform 0.3s ease;
  }

  .slide {
    flex: 0 0 100%;
  }

  .slide-left {
    transform: translateX(-100%);
  }

  .slide-right {
    transform: translateX(100%);
  }

  .slider-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background-color: #333333;
    color: #ffffff;
    font-size: 20px;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.3s ease;
  }

  .slider-button:hover {
    opacity: 1;
  }

  .prev-button {
    left: 20px;
  }

  .next-button {
    right: 20px;
  }
</style>

<script>
  // import HomeBath from '../assets/home-bath.jpg'
  // import HomeKitchen from '../assets/home-kitchen.jpg'
  // import ClinicImg from '../assets/clinic.jpg'
  // import CommercialImg from '../assets/commercial-space.jpg'

  // const serviceTitle = document.querySelector('.service-title')
  // const image_1 = document.querySelector('.image-1')
  // const image_2 = document.querySelector('.image-2')
  const slider = document.querySelector('.slider')
  const numOfSlides = document.querySelectorAll('.slide').length
  let slideOffset = 0

  const prevBtn = document.querySelector('.prev-button')
  const nextBtn = document.querySelector('.next-button')

  prevBtn.addEventListener('click', prevImage)
  nextBtn.addEventListener('click', nextImage)

  // const imageSlides = [
  //   { title: 'Hospitality Cleaning', image1: HomeBath, image2: HomeKitchen },
  //   { title: 'Commercial Cleaning', image1: ClinicImg, image2: CommercialImg },
  // ]

  // let currentIndex = 0
  let timer

  function nextImage() {
    slideOffset = (slideOffset + 1) % numOfSlides
    // currentIndex = (currentIndex + 1) % imageSlides.length
    // updateImage()
    slider.style.transform = `translateX(-${slideOffset * 100}%)`
    // slideAnimation('slide-left')
    // console.log(currentIndex, imageSlides[currentIndex])
  }

  function prevImage() {
    // currentIndex = (currentIndex - 1 + imageSlides.length) % imageSlides.length
    slideOffset = (slideOffset - 1) % numOfSlides

    slider.style.transform = `translateX(${slideOffset * 100}%)`

    // slideAnimation('slide-right')
    // updateImage()
  }

  function slideAnimation(animationClass) {
    const slide = document.querySelector('.slide')
    slide.classList.add(animationClass)
    updateImage()
    setTimeout(function () {
      slide.classList.remove(animationClass)
    }, 300)
  }

  function updateImage() {
    // const { title, image1, image2 } = imageSlides[currentIndex]
    // serviceTitle.textContent = title
    // image_1.src = image1.src
    // image_2.src = image2.src
  }

  function startSlider() {
    timer = setInterval(nextImage, 4000) // Auto change every 4 seconds
  }

  function stopSlider() {
    clearInterval(timer)
  }

  // startSlider()
</script>
